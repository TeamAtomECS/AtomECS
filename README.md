# AtomECS
> Simulate laser cooling with rust.
 
**New:** Paper out now on [arxiv](https://arxiv.org/abs/2105.06447)

[![build](https://github.com/TeamAtomECS/AtomECS/actions/workflows/build.yml/badge.svg)](https://github.com/TeamAtomECS/AtomECS/actions/workflows/build.yml) [![unit_tests](https://github.com/TeamAtomECS/AtomECS/actions/workflows/unit-tests.yml/badge.svg)](https://github.com/TeamAtomECS/AtomECS/actions/workflows/unit-tests.yml)

`atomecs` is a rust crate for simulating the laser-cooling of atoms by optical scattering forces. It supports numerous features:
* Doppler forces on atoms that scatter light, including the random fluctuations that give rise to the Doppler temperature limit.
* Magnetic fields, implemented on a grid or through simple analytical models.
* Atoms generated by an oven.
* Atoms generated on the surface of a simulation volume (eg, a chamber).
* Cooling light beams, defined by their detuning and gaussian intensity profiles.
* Volumes that define bounds for the simulation.
* File output in binary or text format.
* Thorough unit testing to ensure simulation results are correct.
* Good parallel performance on modern multi-core CPUs
* Simulations can be wrapped using python/matlab, as shown in the [source_optimisation_example](https://github.com/TeamAtomECS/source_optimisation_example) or the [matlab examples](https://github.com/TeamAtomECS/matlab_examples).

## Getting Started

After cloning the repository, you can run examples using e.g. `cargo run --release --example 1d_mot`.
If you would like to plot results, you may like to look at the [matlab examples](https://github.com/TeamAtomECS/matlab_examples) useful.

You can build the program documentation using `cargo doc`.

**Important note:** If you receive the error 'panicked while panicking' then see [this issue](https://github.com/TeamAtomECS/AtomECS/issues/2) - you may need to use an earlier toolchain.

## Entity-Component-System (ECS)

`atomecs` follows the data-oriented Entity-Component-System (ECS) pattern, which is implemented using [specs](https://github.com/slide-rs/specs).
ECS is well suited to high-performance simulations, and is flexible enough to accomodate changing design goals.
_If you are unfamiliar with this pattern, and come from an object-oriented background, it is strongly recommended that you read about it before diving into the code._

Some useful ECS resources:
* For the advantages of the pattern, see Mike Acton's [GDC talk](https://www.youtube.com/watch?v=p65Yt20pw0g)
* Although written for Unity/C#, the concepts in the [Unity Entities Package Documentation](https://docs.unity3d.com/Packages/com.unity.entities@0.14/manual/ecs_core.html) are very useful to understand.
* See also the [specs book](https://specs.amethyst.rs/docs/tutorials/) which describes the ECS used in `atomecs`.

## Current Limitations

* atom-atom interactions are not implemented. Most of our current work deals with atom sources, which have low steady-state number densities, so we haven't implemented this. Results for steady-state 3D MOTs should be interpreted carefully. This will be implemented in a future 

## Getting Involved

The current developers of `atomecs` are:
* [Xuhui Chen](https://github.com/Pi-sun), Oxford
* [Elliot Bentine](https://github.com/ElliotB256), Oxford
* [Maurice Zeuner](https://github.com/MauriceZeuner), Cambridge
* [Tiffany Harte](https://github.com/tiffanyharte), Cambridge

The long term goal for `atomecs` is to have a simulation suite for cold atom experiments.
If you'd like to get involved in development, please do!
Development is discussed through the issues. Feel free to fork, develop features, and raise a pull request to merge your changes back into the main repository.
